drop table category if exists;
drop table feed_item if exists;
drop table torrents if exists;
drop table tracker_role if exists;
drop table user_roles if exists;
drop table users if exists;
create table category (id bigint generated by default as identity, category varchar(255) not null, image varchar(255) not null, primary key (id));
create table feed_item (id integer generated by default as identity, content clob, post_date timestamp, title varchar(255) not null, user_id bigint, primary key (id));
create table torrents (id bigint generated by default as identity, checked boolean, description clob, downloaded integer, info_hash varchar(255), leechers integer, name varchar(255) not null, seeders integer, size bigint, uploaded timestamp, category_id bigint, uploader bigint not null, primary key (id));
create table tracker_role (id bigint generated by default as identity, role varchar(255), primary key (id));
create table user_roles (user_id bigint not null, role_id bigint not null);
create table users (id bigint generated by default as identity, downloaded bigint, email varchar(255), lastlogin timestamp, password varchar(255), points integer, registred timestamp, title varchar(255), uploaded bigint, username varchar(255), primary key (id));
alter table category add constraint UKoo4xayr0g0mkbajn7n2m3918u unique (category);
alter table feed_item add constraint FK6oiokgmyasslnv6eewpq93x7e foreign key (user_id) references users;
alter table torrents add constraint FKebw5stl6i06g5j03ru1m34na6 foreign key (category_id) references category;
alter table torrents add constraint FK2agf2asy1e9wly94383j2aqgu foreign key (uploader) references users;
alter table user_roles add constraint FK7l24lp4oelgoijxyj3vquva4q foreign key (role_id) references users;
alter table user_roles add constraint FKobsp96sp2an5vatb9tn16c9s4 foreign key (user_id) references tracker_role;
